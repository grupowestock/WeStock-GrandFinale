<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeStock - Lista produtos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="../assets/Styles/styles.css" rel="stylesheet">
    <link href="../assets/Styles/styles_navegacao.css" rel="stylesheet">
    <link href="./style7.css" rel="stylesheet">
</head>

<body>
    <header class="header">
        <nav class="d-flex navbar navbar-expand-lg navbar-light bg-white shadow-sm menu_topo w-100">
            <a class="navbar-brand" href="../Página 4/dashboard.html">
                <img src="../assets/Images/Logo weStock.png" alt="Logo WeStock">
            </a>
            <div class="collapse navbar-collapse justify-content-around">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="../Página 4/dashboard.html"><img src="../assets/Images/ReturnDoor.png" alt="Voltar" class="icone-nome">Voltar</a>
                    </li>
                </ul>
                <div class="search-container">
                    <input type="text" id="searchInput" class="form-control search-bar" placeholder="Procurar aqui...">
                    <i class="fas fa-search search-icon" onclick="performSearch()"></i>
                </div>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link nav-link-perfil" href="../Página 5/perfil.html"><img class="icone-nome" src="../assets/Images/Perfil.png" alt="Perfil"> Lebron</a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>

    <nav class="d-flex sidebar">
        <div class="sidebar-superior">
            <a href="../Página 5/perfil.html"><img src="../assets/Images/Perfil_pequeno3.png" alt="icone perfil pequeno" class="sidebar-icon">Perfil</a>
            <a href="../Página 7/consulta_produtos.html"><img src="../assets/Images/Nuvem-produtos3.png" alt="icone nuvem pequeno" class="sidebar-icon">Produtos</a>
        </div>
        <div class="sidebar-inferior">
            <a class="nav-link nav-link-contato" href="https://wa.me/5511987654321" target="_blank"><img src="../assets/Images/Info3.png" class="sidebar-icon">Ajuda</a>
            <a href="../Página 1/index.html"><img src="../assets/Images/ExitDoor3.png" alt="ícone porta saída pequeno" class="sidebar-icon"> Sair da conta</a>
        </div>
    </nav>

    <main class="main-content">
        <div class="container mt-5">
            <h2 class="navegacao-titulo">Consulta Produtos</h2>
            <div class="filter-container d-flex justify-content-around align-items-center mb-3 filter-header">
                <div class="filter-options">
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="data" checked> Data</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="descricao" checked> Descrição</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="categoria" checked> Categoria</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="quantidade" checked> Quantidade</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="codigoSku" checked> Cód. SKU</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="tamanho" checked> Tamanho</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="cor" checked> Cor</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="peso" checked> Peso</label>
                    <label class="checkbox-text"><input type="checkbox" class="filter-checkbox" data-column="valor" checked> Valor</label>
                </div>
                <div class="d-flex consulta-info">
                    <span id="totalItems" class="total-produtos">Total Produtos: 12 itens</span>
                    <a class="btn botao-adicionar" href="../Página 6/cadastro_produto.html"> + Cadastrar</a>
                </div>
            </div>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Data</th>
                        <th>Descrição</th>
                        <th>Categoria</th>
                        <th>Quantidade</th>
                        <th>Cód. SKU</th>
                        <th>Tamanho</th>
                        <th>Cor</th>
                        <th>Peso (Kg)</th>
                        <th>Valor (R$)</th>
                        <th>Editar</th>
                        <th>Excluir</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    <!-- Linhas de exemplo -->
                    <tr onclick="location.href='../Página 6/cadastro_produto.html'">
                        <td>3</td>
                        <td>31/05/2024</td>
                        <td>Jerseys Lakers</td>
                        <td>Pessoal</td>
                        <td>02</td>
                        <td>999914688902</td>
                        <td>G</td>
                        <td>Amarelo</td>
                        <td>1,2</td>
                        <td>550,00</td>
                        <td><a href="../Página 6/cadastro_produto.html" onclick="event.stopPropagation();"><i class="fas fa-edit"></i></a></td>
                        <td><i class="fas fa-trash" onclick="event.stopPropagation(); deleteItem(this)"></i></td>
                    </tr>
                    <tr onclick="location.href='../Página 6/cadastro_produto.html'">
                        <td>2</td>
                        <td>31/05/2024</td>
                        <td>Jersey Lebron</td>
                        <td>Pessoal</td>
                        <td>01</td>
                        <td>992914638902</td>
                        <td>G</td>
                        <td>Roxo</td>
                        <td>0,6</td>
                        <td>300,00</td>
                        <td><a href="../Página 6/cadastro_produto.html" onclick="event.stopPropagation();"><i class="fas fa-edit"></i></a></td>
                        <td><i class="fas fa-trash" onclick="event.stopPropagation(); deleteItem(this)"></i></td>
                    </tr>
                    <tr onclick="location.href='../Página 6/cadastro_produto.html'">
                        <td>1</td>
                        <td>29/05/2024</td>
                        <td>Shorts Nike</td>
                        <td>Pessoal</td>
                        <td>02</td>
                        <td>FJ9167-010</td>
                        <td>M</td>
                        <td>Preto</td>
                        <td>0,5</td>
                        <td>225,00</td>
                        <td><a href="../Página 6/cadastro_produto.html" onclick="event.stopPropagation();"><i class="fas fa-edit"></i></a></td>
                        <td><i class="fas fa-trash" onclick="event.stopPropagation(); deleteItem(this)"></i></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="../Página 7/produto-Lista.js"></script>
    <script>
        // Função para lidar com filtros
        document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                let column = this.getAttribute('data-column');
                let table = document.querySelector('table');
                let rows = table.querySelectorAll('tbody tr');
                let index = Array.from(table.querySelectorAll('th')).findIndex(th => th.innerText.toLowerCase().includes(column));
                
                rows.forEach(row => {
                    if (this.checked) {
                        row.children[index].style.display = '';
                    } else {
                        row.children[index].style.display = 'none';
                    }
                });
                
                let headers = table.querySelectorAll('th');
                if (this.checked) {
                    headers[index].style.display = '';
                } else {
                    headers[index].style.display = 'none';
                }
            });
        });

        // Custom confirmation dialog for delete
        function deleteItem(element) {
            let confirmDelete = confirm('Tem certeza que deseja deletar este item?');
            if (confirmDelete) {
                let row = element.closest('tr');
                row.remove();
                updateItemCount();
            }
        }

        // Function to update the item count
        function updateItemCount() {
            let rowCount = document.querySelectorAll('#productTableBody tr').length;
            document.getElementById('totalItems').innerText = 'Total Produtos: ' + rowCount + ' itens';
        }

        // Initial count update
        updateItemCount();

        // Function to handle search
        function performSearch() {
            let searchInput = document.getElementById('searchInput').value.toLowerCase();
            let table = document.querySelector('table');
            let rows = table.querySelectorAll('tbody tr');

            rows.forEach(row => {
                let rowText = row.innerText.toLowerCase();
                if (rowText.includes(searchInput)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });

            // Update item count after search
            updateItemCount();
        }

        // Allow pressing "Enter" in the search input to trigger search
        document.getElementById('searchInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        });
    </script>
</body>
</html>
